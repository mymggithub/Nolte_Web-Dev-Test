<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/fonts/ionicons.min.css">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style type="text/css">
        /*touches to make the search bar more dynamic*/
        .search-form {
          display:flex;
          font-size:14px;
          margin:25px 0px;
        }
        .search-form input {
          border:1px solid #ddd;
          border-radius:5px 0 0 5px;
          padding:10px;
          border-right:none;
          width:100%;
          background-image: url(./assets/img/searchicon.png);
          background-position: 10px 12px;
          background-repeat: no-repeat;
          padding: 12px 20px 12px 42px;
        }
        /*searchNear is going to be for to look based on address*/
        #searchNear{
            background-image: url(./assets/img/nearicon.png);
        }
        .btn.btn-default.search-btn {
          border:1px solid #ddd;
          border-radius:0 5px 5px 0;
          box-shadow:none;
          color:#919693;
        }
        /* Styles the columns of the table */
        tr:nth-child(even) {
            background-color: #f2f2f2
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>

</head>
<body ng-app="myapp" ng-controller="myCtrl">
    <div class="container">
        <div class="row">
            <div class="col-sm-12 col-xs-12 col-md-12 search-form">
                <input type="text" name="search" placeholder="Search venue..." ng-model="venueSearch" id="venueSearch">
                <input type="text" name="search" placeholder="Search Near...Can leave blank"  ng-model="nearlocation" id="searchNear">
                <button class="btn btn-info" ng-click="searchFor()">Search</button>
            </div>
            <div class="col-sm-12 col-xs-12 col-md-12">

            </div>
        </div>
    </div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();
        function showError(error) {
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    alert("User denied the request for Geolocation.");
                    break;
                case error.POSITION_UNAVAILABLE:
                    alert("Location information is unavailable.");
                    break;
                case error.TIMEOUT:
                    alert("The request to get user location timed out.");
                    break;
                case error.UNKNOWN_ERROR:
                    alert("An unknown error occurred.");
                    break;
            }
        }

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
            	console.log("lat: "+position.coords.latitude+", lng: "+position.coords.longitude)
            }, showError);
        } else {
            alert("Geolocation is not supported by this browser.");
        }

        var myapp = angular.module('myapp', []);
        myapp.controller("myCtrl", function($scope, $http) {
        	$scope.searchFor = function() {
        		$scope.search_val = $scope.venueSearch;
                $http.get("https://api.foursquare.com/v2/venues/search?client_id=UCOSSBXHSTZ3UIAA4RKO5DPXCVJQEOG1NINJ1LDUNL0LEJ4F&client_secret=Q3CGAJFLKGOELNT3I3YPUAQKEHMI20CN4J2QDZGBHD433QDS&v=20180323&ll=40.7337621,-74.0095604&query="+$scope.venueSearch).then(
                    function(r) {
                    	console.log(r.data.response.venues);
                        $scope.results = r.data.response.venues;
                    },
                    function(r) {
                        // foursquare is not advaced as google in deciphering near, so this is needed for errors
                        alert("Something went wrong, Please try a diffrent search or try another time.");
                    }
                );
        	}
        });
    </script>
</body>
</html>